{% extends "base.html" %}
{% block razor_payment %}
<div class='p-2'>
        
<div class='text-center xs:mx-1 xm:mx-1 sm:mx-1 md:mx-[25%] lg:mx-[30%] xl:mx-[40%] 2xl:mx-[42.5%] bg-gray-800 my-20 w-full md:w-[400px] rounded-lg shadow-lg shadow-gray-50'>
        <div class='grid grid-rows-2'>
            <div class='row-span-1'>
                <img src="/media/{{ item.thumbnail }}" alt="name" class="w-full  rounded-t-lg"/>
            </div>
            <div class='row-span-1 p-2 font-mono text-left'>
                <h3 class='py-1'>Title: {{ item.title }}</h3>
                <h3 class='py-1'>Posted By : {{ item.instructor.username }}</h3>
                <p class='py-1'>Published On : {{ item.created_at }}</p>
                <p class='py-1'>Price: {{ item.price }}</p>
                <form action="" method="post" class='text-right my-1'>
                    {% csrf_token %}
                    <input type="hidden" name="user" value="{{ user.id }}">
                    <input type="hidden" name="course" value="{{ item.id }}">
                    <input type="hidden" name="price" value="{{ item.price }}">
                    <input class='col-span-3 text-slate-800' type="text" name="phone_number" id="phone_number" placeholder="Enter Your Phone Number" maxlength='10'>
                    <button type='submit' class='p-2 bg-green-500 rounded-sm  col-span-1'><span class='items-center justify-center '>
                        Confirm
                    </button>
                </form>
                <p class='text-right'>
                <a href="{% url "cart-page" %}" class='py-1'>
                    <button type='button' class='p-2 bg-blue-500 rounded-sm  '><span class='items-center justify-center '>
                        Cancel
                    </button>
                </a>
                </p>
                
                <p class='text-right my-1'>
                {% if payment %}
                    <form action="{% url 'payment-success' %}" method="POST" class='text-center bg-yellow-500 mx-10 p-2 rounded-lg text-slate-800 border border-slate-400'>
                        {% csrf_token %}
                        <script
                            src="https://checkout.razorpay.com/v1/checkout.js"
                            data-key="rzp_test_kaz60tEn560E6V" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
                            data-amount="{{payment.amount}}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
                            data-currency="{{payment.currency}}" // You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
                            data-order_id="{{payment.id}}" // Replace with the order_id generated by you in the backend.
                            data-buttontext="Pay Now"
                            data-name="TutorClouds"
                            data-description="All the skills you need in one place"
                            data-image="https://example.com/your_logo.jpg"
                            data-prefill.name="{{user}}"
                            data-prefill.email="{{user.email}}"
                            data-theme.color="#0E7490"
                        ></script>
                        <input type="hidden" custom="Hidden Element" name="hidden"/>
                        </form>
                {% endif %}
                </p>
                    
            </div>
        </div>                               
</div>
</div>


{% endblock razor_payment %}