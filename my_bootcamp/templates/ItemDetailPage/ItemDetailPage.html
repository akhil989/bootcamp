{% extends "base.html" %}
{% block item_detail %}
<div>
    <div class='bg-slate-800  grid md:grid-cols-2 gap-2 p-2 h-full'>
        <div class='p-2 col-span-1 rounded-lg bg-black'>
        <div>
        <h3 class='font-bold text-lg text-gray-300 text-ellipsis overflow-x-scroll no-scrollbar'>{{details.title|capfirst}}</h3>
        </div>
        <video controls autoplay-off class='w-full'>
            <source src="/media/{{details.video}}" type='video/mp4'>
        </video>
        <div class='grid grid-cols-5 text-right'>
            <div class='col-span-1'></div>
            <div class='col-span-1'></div>
            <div class='col-span-1'></div>
            <div class='col-span-1'>
                {% if user.is_authenticated %}
                {% if user.id in details.liked_users %}
                    <form action="{% url 'like_video' details.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit"><i class="fa-solid fa-heart  text-orange-600 w-8 h-8 "></i> you liked</button>
                    </form>
                {% else %}
                    <form action="{% url 'like_video' details.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class=''><i class="fa-regular fa-heart  text-orange-600 w-8 h-8 "></i></i>add like</button>
                    </form>
                {% endif %}
                {% else %}
                <a href="{% url 'login' %}"><button type="submit" class=''><i class="fa-regular fa-heart  text-orange-600 w-8 h-8 "></i></i>add like</button></a>
                {% endif %}
            </div>
            <div class='col-span-1'>
                {% if user.is_authenticated %}
                {% if user.id in details.cart_users %}
                    <form action="{% url 'cart-item' item.id %}" method="post"> 
                        {% csrf_token %}  
                    <button type='submit' class=''>Item carted:<i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                        items-center p-2  text-orange-700"></i></button>
                    <br>
                    </form>
                {% else %}
                    <form action="{% url 'cart-item' details.id %}" method="post"> 
                        {% csrf_token %}  
                    <button type='submit' class=''>Add To Cart:<i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                        items-center p-2  text-slate-200 hover:text-slate-200"></i></button>
                    <br>
                    </form>
                {% endif %}
                {% else %}
                    <a href="{% url 'login' %}"><button type='submit' class=''><i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                        items-center p-2  text-orange-700"></i></button></a> 
                {% endif %}
            </div>
        </div>
        </div>
        <div class='p-2 col-span-1 overflow-y-scroll  no-scrollbar py-2'>
        <h3>Posted By : {{details.instructor.username}}</h3>
        <p>Published On : {{details.created_at}}</p>
        <p>Price: {{details.price}}</p>
        <p>Description:  {{details.description}}</p>
        <p>Likes: {{details.total_likes}}</p>
        <p><a><button class='p-1 bg-blue-500 border border-blue-200 my-2' id='rate_video'>Rate This Video:</button></a>
            <form action="{% url 'rate-video' details.id %}" method="post" class='hidden' id='rating_form'> 
                {% csrf_token %}  
            <button type='submit' class='w-full text-left text-yellow-500' name='rating' value=5>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i><span class='text-slate-200 ml-2'>  Excellent!!!!</span>
            </button><br>
            <button type='submit' class='w-full text-left text-yellow-500' name='rating' value=4>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i><span class='text-slate-200 ml-3'>  Very Usefull!!!!</span>
            </button><br>
            <button type='submit' class='w-full text-left text-yellow-500' name='rating' value=3>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i><span class='text-slate-200 ml-4'>  Usefull!!!!</span>
            </button><br>
            <button type='submit' class='w-full text-left text-yellow-500' name='rating' value=2>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i><span class='text-slate-200 ml-5'>  Bad Content!!!!</span>
            </button><br>
            <button type='submit' class='w-full text-left text-yellow-500' name='rating' value=1>
                <i class="fa-solid fa-star w-4 h-4"></i><span class='text-slate-200 ml-6'>Time Wasting!!!!</span>
            </button><br>
            
        </form>
        <p class='w-full text-right text-yellow-500 px-10 my-1'>
            <button class='hidden p-1 bg-slate-700' id='rating_hide'>cancel</button>
        </p>
        </p>
        <p class='text-left text-yellow-500'>
            {% if item.average_rating == 5 %}
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
            {% elif item.average_rating == 4 %}
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
            {% elif item.average_rating == 3 %}
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
            {% elif item.average_rating == 2 %}
                <i class="fa-solid fa-star w-4 h-4"></i>
                <i class="fa-solid fa-star w-4 h-4"></i>
            {% elif item.average_rating == 1 %}
                <i class="fa-solid fa-star w-4 h-4"></i> 
            {% endif %} Total Ratings: {{details.total_rating}}
            
                     
        </p>
        <p>Rating:{{details.average_rating}}
        {% if user.id in details.rated_users %}
           [--You have rated--]
        {% endif %}
        </p>
        
        
        {% if user.is_authenticated %}
        {% if user.id in details.cart_users %}
            <form action="{% url 'cart-item' details.id %}" method="post"> 
                {% csrf_token %}  
            <button type='submit' class=''>Item carted:<i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                items-center p-2  text-orange-700"></i></button>
            <br>
            </form>
        {% else %}
            <form action="{% url 'cart-item' details.id %}" method="post"> 
                {% csrf_token %}  
            <button type='submit' class=''>Add To Cart:<i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                items-center p-2  text-slate-200 hover:text-slate-200"></i></button>
            <br>
            </form>
        {% endif %}
        {% else %}
            <a href="{% url 'login' %}"><button type='submit' class=''>Item carted:<i class="fa-solid fa-cart-shopping w-8 h-8 font-serif 
                items-center p-2  text-orange-700"></i></button></a> 
        {% endif %}
            
    
        {% if user.is_authenticated %}
        {% if user.id in details.liked_users %}
            <form action="{% url 'like_video' details.id %}" method="post">
                {% csrf_token %}
                <button type="submit"><i class="fa-solid fa-heart  text-orange-600 w-8 h-8 "></i> you liked</button>
            </form>
        {% else %}
            <form action="{% url 'like_video' details.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class=''><i class="fa-regular fa-heart  text-orange-600 w-8 h-8 "></i></i>add like</button>
            </form>
        {% endif %}
        {% else %}
           <a href="{% url 'login' %}"><button type="submit" class=''><i class="fa-regular fa-heart  text-orange-600 w-8 h-8 "></i></i>add like</button></a>
        {% endif %}
        </div>

    </div>
    
    <div class=' flex  items-center justify-center'>
        <div class='flex-1 text-center w-full text-xl py-20'>
            <h2 class='text-7xl font-mono font-extrabold'>Come teach with us</h2>
            <p>Become an instructor and change lives â€” including your own</p>
            <p>
                <a href='{% url "join-now" %}'>
                <button class='bg-blue-700 rounded-sm border border-blue-200 p-2  w-72 my-4'>Get Started</button>
                </a>    
            </p>
        </div>
    </div>
<div class='flex p-2 items-center justify-center bg-slate-700'>
    <div class=' text-center w-full text-xl py-20'>
    <h2 class='text-3xl font-mono font-bold'>Become an instructor today</h2>
    <p>Join one of the best online learning marketplaces.</p>
    <p>
        <a href='{% url "join-now" %}'>
        <button class='bg-blue-700 rounded-sm border border-blue-200 p-2  w-72 my-4'>Get Started</button>
        </a>    
    </p>
    </div>
</div>

</div>
{% endblock item_detail %}